% \begin{figure*}[!b] \centering
% \includegraphics[width=\linewidth]{images/folder_for_kacper/qual_gt_shadows/wild2d-qual_gt_shadows.pdf}
% \caption{ \textbf{\change{imo to nie wyglada ladnie. Moze zostawic tylko osr?
% myslalam, zeby zrobic porownanie cieni swiatlem punktowym, ale nie mam chyba
% na to sily. Moze wysłać to do appendixu} Qualitative comparison of renderings
% with gt env map for the same phot session.} Results for NERF-OSR, ST-TensoRF
% reported originally in \cite{chang2024srtensorf}.}
% \label{fig:qual_gt_shadows} \end{figure*}
\renewcommand{\inputimage}[1]{\includegraphics[height=\height,trim={8bp 0 8bp 0}, clip]{assets/5_lumigauss/folder_for_kacper/qual_relight_albedo_norm/#1}}
\renewcommand{\inputimageshadows}[1]{\includegraphics[height=\height,trim={8bp 0 8bp 0}, clip]{assets/5_lumigauss/folder_for_kacper/qual_gt_shadows/#1}}

\newcommand{\shadowsfigure}{
  \centering
  \tikzset{external/export next=false}
  \resizebox{0.5\linewidth}{!}{
    {
        \def\height{64bp}
        \def\spysize{24bp}
        \def\offset{36bp}
        \def\scale{0.8}
        \def\scaleleft{0.8}
        \def\distabove{0.5em}
        \def\distleft{0.0em}
        \def\clipleft{2cm}
        \def\clipright{2cm}
        \begin{tikzpicture}[
            >=stealth',
            title/.style={
                anchor=base,
                align=center,
                scale=\scale,
              },
            spy using outlines={circle, red, magnification=3, connect spies, size=\spysize}
          ]

          \matrix[
            matrix of nodes,
            anchor=west,
            column sep=0pt,
            row sep=0pt,
            ampersand replacement=\&,
            inner sep=0,
            outer sep=0,
          ] (shadows) {
            \inputimageshadows{osr-shadows-albedo.png} \&
            \inputimageshadows{osr-shadows.png}       \\
            \inputimageshadows{sr-shadows-albedo.png} \&
            \inputimageshadows{sr-shadows.png}        \\
            \inputimageshadows{lumigauss-shadows-albedo.png} \&
            \inputimageshadows{lumigauss-shadows.png} \\
            \inputimageshadows{gt-shadows.png}        \\
          };

          \node[above=\distabove of shadows-1-1.north, title]{Relit Reconstruction};
          \node[above=\distabove of shadows-1-2.north, title]{Predicted Shadows};

          \node[left=\distleft of shadows-1-1.west, align=center,scale=\scaleleft]{\rotatebox{90}{NeRF-OSR~\cite{rudnev2022nerfosr}}};
          \node[left=\distleft of shadows-2-1.west, align=center,scale=\scaleleft]{\rotatebox{90}{SR-TensorRF~\cite{chang2024srtensorf}}};
          \node[left=\distleft of shadows-3-1.west, align=center,scale=\scaleleft]{\rotatebox{90}{\textbf{Ours}}};
          \node[left=\distleft of shadows-4-1.west, align=center,scale=\scaleleft]{\rotatebox{90}{Ground Truth}};

          \foreach \y in {1,...,3}{
              \foreach \x in {1,2}{
                  \edef\temp{\noexpand\spy[anchor=center,magnification=2] on ([xshift=-1.6em,yshift=-0.7em] shadows-\y-\x.center) in node[below left=3.75bp and 3.75bp] at (shadows-\y-\x.north east);}
                  \temp
                }
            }
          \spy[anchor=center,magnification=2] on ([xshift=-1.6em,yshift=-0.7em] shadows-4-1.center) in node[below left=3.75bp and 3.75bp] at (shadows-4-1.north east);
        \end{tikzpicture}
      }
  }
}

\begin{figure}[!t]
  \centering
  \shadowsfigure
  \caption{ \textbf{Qualitative comparison of scene reconstruction for the selected photo session -- }
    Results for NeRF-OSR~\cite{rudnev2022nerfosr} and \lumigauss were
    generated using ground truth enviroment maps for selected photo session,
    while ST-TensoRF~\cite{chang2024srtensorf} used extracted timestamp.
    Results for NeRF-OSR and SR-TensorF reported originally in
    \cite{chang2024srtensorf}.
  }
  \label{fig:lumigauss-qual_gt_shadows}
\end{figure}