\usepackage{graphicx}
\usepackage{relsize}
\usepackage{booktabs}
\usepackage{color}
\usepackage{multirow}
\usepackage{bm}
\usepackage[percent]{overpic}
\usepackage{tcolorbox}

\usepackage{anyfontsize}
\usepackage{pgfplots}
\usepackage[normalem]{ulem}
\usepackage[dvipsnames]{xcolor}
\usepackage{colortbl}
\definecolor{cvprblue}{rgb}{0.21,0.49,0.74}
% \usepackage[pagebackref,breaklinks,colorlinks,allcolors=cvprblue]{hyperref}
\usepackage{tikz}
\usepackage{silence}
\usepackage{bbm}
\usepackage{pifont}

\def\mathdefault#1{#1}
\everymath=\expandafter{\the\everymath\displaystyle}
\pgfplotsset{compat=1.18}

\usetikzlibrary{
  calendar,
  fpu,
  matrix,
  positioning,
  arrows,
  arrows.meta,
  calc,
  decorations.pathreplacing,
  decorations.text,
  spy,
  external,
}

\tikzset{
  % style for inserting images as nodes
  img/.style={
      % text width=2cm, %% don't use this text height=2cm, %% don't use this
      inner sep=0pt,     % % use this
      outer sep=0pt,     % % and this
      rectangle,
      align=center} % only for debugging..
}
\input{tikz_addons.tex}
\tikzexternalize[shell escape=-enable-write18]

\newcommand{\KK}[1]{\textbf{\color{teal}[KK: #1]}}
\newcommand{\kk}[1]{{\color{teal}#1}}

\newcommand{\todo}[1]{{\color{red}#1}}  % a proposal text, use sparingly
\newcommand{\TODO}[1]{\textbf{\color{red}[TODO: #1]}}

\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\mlp}{MLP}
\DeclareMathOperator*{\upsample}{upsample}
\DeclareMathOperator*{\downsample}{downsample}
\DeclareMathOperator*{\diag}{diag}
\DeclarePairedDelimiter\ceil{\lceil}{\rceil}
\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}

% Support for easy cross-referencing
\usepackage[capitalize]{cleveref}
\crefname{section}{Sec.}{Secs.}
\Crefname{section}{Section}{Sections}
\Crefname{table}{Table}{Tables}
\crefname{table}{Tab.}{Tabs.}

\newcommand\mycoloredbox[1]{\textcolor{#1}{\rule{0.5em}{0.5em}}}
\definecolor{secondbestcolor}{HTML}{16E9CB}
\definecolor{firstbestcolor}{HTML}{169EE9}
\newcommand{\tablefirstbest}[0]{\cellcolor{firstbestcolor}}
\newcommand{\tablesecondbest}[0]{\cellcolor{secondbestcolor}}

\newcommand{\real}{\mathbb{R}}
\newcommand{\latentdimension}{D}
\newcommand{\projecteddimension}{d}

\makeatletter
\DeclareCiteCommand{\fullciteallauthors}
{\defcounter{maxnames}{99}
  \usebibmacro{prenote}}
{\usedriver
  {\DeclareNameAlias{sortname}{default}}
  {\thefield{entrytype}}}
{\multicitedelim}
{\usebibmacro{postnote}}

\renewcommand*{\mkbibnamegiven}[1]{
  \ifitemannotation{highlight}
  {\textbf{#1}}
  {#1}}

\renewcommand*{\mkbibnamefamily}[1]{
  \ifitemannotation{highlight}
  {\textbf{#1}}
  {#1}}

\makeatother
% \renewcommand{\paragraph}[1]{ \vspace{.5em}\noindent\textbf{#1} }

\newcommand{\conerf}{CoNeRF\xspace}
\newcommand{\blendfields}{BlendFields\xspace}
\newcommand{\lumigauss}{LumiGauss\xspace}
\newcommand{\clog}{CLoG\xspace}

% ======== CoNeRF ======= %

% % % basic math symbols %
\usepackage{dsfont}
\newcommand{\loss}[1]{\ell_{\text{#1}}}
\newcommand{\calL}{\mathcal{L}}
\newcommand{\calN}{\mathcal{N}}
\newcommand{\calF}{\mathcal{F}}
\newcommand{\expect}{\mathbb{E}}
\newcommand{\IR}{{\mathbb{R}}}
\newcommand{\IE}{{\mathbb{E}}}
\newcommand{\balpha}{{\boldsymbol{\alpha}}}
\newcommand{\bbeta}{{\boldsymbol{\beta}}}
\newcommand{\bzero}{{\mathbf{0}}}
\newcommand{\bx}{{\mathbf{x}}}
\newcommand{\bc}{{\mathbf{c}}}
\newcommand{\bd}{{\mathbf{d}}}
\newcommand{\bC}{{\mathbf{C}}}
\newcommand{\boldm}{{\mathbf{m}}}
\newcommand{\bM}{{\mathbf{M}}}
\newcommand{\br}{{\mathbf{r}}}
\newcommand{\bv}{{\mathbf{v}}}
\newcommand{\bI}{{\mathbf{I}}}
\newcommand{\beps}{{\boldsymbol{\epsilon}}}
\newcommand{\Canonicalizer}{{\mathcal{K}}}
% \newcommand{\Canonicalizer}{{\mathcal{S}}}
% \newcommand{\LifterA}{{\mathcal{G}}} %< OBSOLETE
% \newcommand{\LifterB}{{\mathcal{H}}} %< OBSOLETE
\newcommand{\hypermap}{\mathcal{H}}
\newcommand{\Representation}{{\mathcal{R}}}
\newcommand{\Attribute}{{\mathcal{A}}}
\newcommand{\AttributeSet}{{\mathfrak{A}}}
\newcommand{\MaskSet}{{\mathfrak{M}}}
\newcommand{\reglambda}[1]{\lambda_\text{#1}}
\newcommand{\pars}{\boldsymbol{\theta}}
\newcommand{\given}{;}

\newcommand{\iImage}{c}
\newcommand{\nImages}{C}
\newcommand{\image}{\mathbf{C}}
\newcommand{\images}{\{\image_\iImage\}}
\newcommand{\latents}{\{\boldsymbol\beta_\iImage\}}
\newcommand{\latent}{\boldsymbol\beta}
\newcommand{\latentDim}{B}
\newcommand{\attrib}{\boldsymbol\alpha}
\newcommand{\allpars}{\boldsymbol\theta}
\newcommand{\iFrame}{k}
\newcommand{\width}{W}
\newcommand{\height}{H}
\newcommand{\nAttributes}{A}
\newcommand{\hyperAttributeDim}{d}
\newcommand{\iAttribute}{a}
\newcommand{\attribute}{\alpha}
\newcommand{\attributes}{\boldsymbol\alpha}
\newcommand{\Mask}{\mathbf{M}}
\newcommand{\mask}{\mathbf{m}}
\newcommand{\gt}{\text{gt}}
\newcommand{\AttributeNet}{\mathcal{A}}
\newcommand{\point}{\mathbf{x}}
\newcommand{\MaskNet}{\mathcal{M}}
\newcommand{\stopgrad}{\xcancel{\nabla}}
\newcommand{\field}{\mathbf{f}}
\newcommand{\VolRend}{\mathcal{V}}

\newcommand{\CIRCLE}[1]{\raisebox{.5pt}{\footnotesize \textcircled{\raisebox{-.6pt}{#1}}}}
\newcommand{\SupplementaryMaterial}{\texttt{Supplementary}\xspace}

% ======== BlendFields ======= %
\setlength{\abovedisplayskip}{0pt}
\setlength{\belowdisplayskip}{0pt}

\usetikzlibrary{matrix, positioning,arrows,arrows.meta,calc,decorations.pathreplacing,decorations.text,spy}

\tikzset{
  % style for inserting images as nodes
  img/.style={
      % text width=2cm, %% don't use this text height=2cm, %% don't use this
      inner sep=0pt,     % % use this
      outer sep=0pt,     % % and this
      rectangle,
      align=center} % only for debugging..
}

\definecolor{turquoise}{cmyk}{0.65,0,0.1,0.3}
\definecolor{purple}{rgb}{0.65,0,0.65}
\definecolor{dark_green}{rgb}{0, 0.5, 0}
\definecolor{orange}{rgb}{0.8, 0.6, 0.2}
\definecolor{red}{rgb}{0.8, 0.2, 0.2}
\definecolor{darkred}{rgb}{0.6, 0.1, 0.05}
\definecolor{blueish}{rgb}{0.0, 0.3, .6}
\definecolor{light_gray}{rgb}{0.7, 0.7, .7}
\definecolor{pink}{rgb}{0.8, 0, 0.8}
\definecolor{greyblue}{rgb}{0.25, 0.25, 1}

\definecolor{thirdbestcolor}{rgb}{1,1, 0.6}
\definecolor{secondbestcolor}{rgb}{1, 0.9, 0.6}
\definecolor{firstbestcolor}{rgb}{1, 0.6, 0.6}

\definecolor{seismicblue}{rgb}{0.0,0.0,0.75}
\definecolor{seismicred}{rgb}{0.62,0.03,0.0}
\definecolor{seismicgray}{rgb}{0.9,0.9,0.9}

% % % misc %
\newcommand{\cmark}{\textcolor{green}{\ding{51}}}
\newcommand{\xmark}{\textcolor{red}{\ding{55}}}
\newcommand{\supplementary}{\texttt{Supplementary}}

% % % math %
\newcommand{\VolTeMorph}{VolTeMorph~\cite{garbin2024voltemorph}\xspace}
\newcommand{\methodname}{BlendFields}
\newcommand{\iExpr}{k}
\newcommand{\nExpr}{K}
\newcommand{\expression}{\mathbf{e}}
\newcommand{\pixelcolor}{C}
\newcommand{\blendfield}{\boldsymbol{\alpha}}
\newcommand{\blendingweight}{\alpha}
\newcommand{\vertex}{\mathbf{v}}
\newcommand{\indicator}{\mathbbm{1}}
\renewcommand{\temp}{\tau}
\newcommand{\pos}{\mathbf{x}}
\newcommand{\dir}{\mathbf{d}}
\newcommand{\map}{\mathcal{T}}
\newcommand{\render}{\mathcal{R}}
\newcommand{\density}{\ensuremath{\sigma}}
\newcommand{\radiance}{\mathbf{c}}
\newcommand{\ray}{\ensuremath{\mathbf{r}}}
\newcommand{\template}[1]{\bar{#1}}
\newcommand{\aux}[1]{\tilde{#1}}
\newcommand{\lossweight}{\lambda}
\newcommand{\tet}{\mathbf{T}}
\newcommand{\edgematrix}{\mathbf{D}}
\newcommand{\mesh}{\mathcal{M}}
\newcommand{\meshVertices}{\mathbf{V}}
\newcommand{\meshTets}{\mathbf{T}}
\newcommand{\tetgeometry}{\mathcal{G}}
\newcommand{\laplacian}{\ensuremath{\mathbf{L}}}
\newcommand{\hyperparam}{\lambda}

% % % OBSOLETE % 
\newcommand{\numberofexprs}{\nExpr}
\newcommand{\outputcolor}{\ensuremath{\mathbf{c}}}
\newcommand{\coordinate}{\ensuremath{\mathbf{x}}}
\newcommand{\viewdirection}{\ensuremath{\mathbf{v}}}
\newcommand{\auxcolor}{\ensuremath{\tilde{\outputcolor}}}
\newcommand{\numberofneighboursparameter}{\ensuremath{k}}
\newcommand{\tetrahedronfeatures}{\ensuremath{\mathbf{f}}}

% % % macros % 
\newcommand{\numcomponents}{\ensuremath{D}}
\newcommand{\viewcomponents}{\ensuremath{\left\{\left(u_i, v_i, w_i\right)\right\}_{i=1}^\numcomponents}}
\newcommand{\mixingcoefficients}{\ensuremath{\bm{\beta}}}
\newcommand{\viewcomponentsvectorized}{\left(\mathbf{u}, \mathbf{v}, \mathbf{w}\right)}
\newcommand{\colorsetslong}{\ensuremath{\left\{\auxcolor\right\}_{i=1}^\numberofexprs}}
\newcommand{\colorsetsshort}{\ensuremath{\mathcal{C}}}
\newcommand{\templatecolor}{\ensuremath{\bar{\outputcolor}}}
\newcommand{\basefunction}{\ensuremath{F}}
\newcommand{\realset}{\ensuremath{\mathbb{R}}}
\newcommand{\numexpressioncoords}{\ensuremath{E}}
\newcommand{\volumechange}{\ensuremath{V}}
\newcommand{\numtetrahedra}{\ensuremath{T}}
\newcommand{\edgevector}{\ensuremath{\mathbf{d}}}
\newcommand{\vertices}{\ensuremath{\mathbf{v}}}
\newcommand{\deformed}[1]{\ensuremath{\tilde{#1}}}
\newcommand{\canonical}[1]{\ensuremath{\bar{#1}}}
\newcommand{\deformationmatrix}{\ensuremath{\mathbf{F}}}
\newcommand{\scalevector}{\ensuremath{\mathbf{s}}}
\newcommand{\dataset}{\ensuremath{\mathcal{D}}}
\newcommand{\expressionsset}{\ensuremath{\left\{\expression\right\}_{i=1}^{\numberofexprs+1}}}
\newcommand{\temperature}{\ensuremath{\tau}}
\newcommand{\templateviewcomponentsvectorized}{\left(\bar{\mathbf{u}}, \bar{\mathbf{v}}, \bar{\mathbf{w}}\right)}
\newcommand{\auxviewcomponentsvectorized}[1]{\left(\tilde{\mathbf{u}}(#1), \tilde{\mathbf{v}}(#1), \tilde{\mathbf{w}}(#1)\right)}
\newcommand{\barycentric}[1]{\ensuremath{\hat{#1}}}
\newcommand{\tetravertices}{\ensuremath{\left\{\vertex_1, \vertex_2, \vertex_3, \vertex_4\right\}}}
\newcommand{\barycentricweight}[1]{\ensuremath{\lambda_{#1}(\coordinate)}}
\newcommand{\barycentrics}{\ensuremath{\left\{\barycentricweight{1}, \barycentricweight{2}, \barycentricweight{3}, \barycentricweight{4}\right\}}}
\newcommand{\neighbourhood}{\ensuremath{\mathcal{N}}}
\newcommand{\allvertices}{\mathcal{V}}
\newcommand{\identitymatrix}{\ensuremath{I}}
\newcommand{\weightdiffusion}{\ensuremath{\lambda_\text{diff}}}
\newcommand{\blendingweightmatrix}{\ensuremath{\mathbf{A}}}
\newcommand{\lossformatting}[1]{\ensuremath{\text{#1}}}
\newcommand{\photometricloss}{\loss_\lossformatting{mse}}
\newcommand{\sparsitymouthloss}{\loss_\lossformatting{sp-mouth}}
\newcommand{\sparsityprimitivesloss}{\loss_\lossformatting{sp-primitives}}
\newcommand{\weightphotometricloss}{\lossweight_\lossformatting{mse}}
\newcommand{\weightsparsitymouthloss}{\lossweight_\lossformatting{sp-mouth}}
\newcommand{\weightsparsityprimitivesloss}{\lossweight_\lossformatting{sp-primitives}}
\newcommand{\tablethirdbest}[0]{\cellcolor{thirdbestcolor}}
\newcommand{\indicatorfunction}{\ensuremath{\mathbf{1}}}
\newcommand{\numberofsamples}{\ensuremath{N}}
\newcommand{\coarsesamples}{\ensuremath{N_\text{coarse}}}
\newcommand{\importancesamples}{\ensuremath{N_\text{importance}}}
\newcommand{\numberofbases}{\ensuremath{L}}

% \setlength{\aboverulesep}{1pt} \setlength{\belowrulesep}{2pt}
% \setlength{\extrarowheight}{.0ex} \extrarowheight=\aboverulesep
% \addtolength{\extrarowheight}{\belowrulesep} \aboverulesep=0pt
% \belowrulesep=0pt

\newcommand{\volume}{\mathcal{V}}

\newcommand{\teasernobox}{}

% ============= LumiGauss =========== %

\newcommand{\irradiance}{\bar{\mathbf{c}}}
\newcommand{\shadowedradiance}{\tilde{\radiance}}
\newcommand{\albedo}{\bm{\rho}}
\newcommand{\gaussians}{\mathcal{G}}
\newcommand{\lumigausslatents}{\mathcal{E}}
\newcommand{\splatting}{\mathcal{S}}
\newcommand{\normal}{\mathbf{n}}
\newcommand{\embedding}{\mathbf{e}}
\newcommand{\sceneindex}{c}
\newcommand{\rotation}{\mathbf{R}}
\newcommand{\translation}{\mathbf{t}}
\newcommand{\scaling}{\mathbf{s}}
\newcommand{\opacity}{o}
\newcommand{\light}{L}
\newcommand{\lightsh}{\mathbf{l}}
\newcommand{\transferfun}{D}
\newcommand{\transferfunsh}{\mathbf{d}}
\newcommand{\params}{\bm{\theta}}
\newcommand{\camera}{\mathcal{C}}
\newcommand{\direction}{\bm{\omega}}
\newcommand{\nshcoeffs}{n}
\newcommand{\inputimage}[1]{}
\newcommand{\inputimageshadows}[1]{}

\newcommand{\lumigausslossweight}[1]{\lambda_\text{#1}}